<python text="# This was inserted by the user.">
<python json_py.text="import deco">
<python json_py.text="from dataclasses import dataclass">

type kind <doc text="Definition-level doc"> = [
  | Root (* class name conflict *)
  | Thing
      <doc text="
    Case-level doc. First paragraph explaining {{Thing}}.

    Second paragraph.
{{{
  Preformatted block.
    Second line with extra indentation.
}}}
    End.
">
    of int
  | WOW <json name="wow">
  | Amaze <json name="!!!"> of string list
] <doc text="Sum-level doc">

type frozen
  <python decorator="dataclass(frozen=True)"> = [
  | A
  | B of int
]

type ('a, 'b) parametrized_record = {
  field_a: 'a;
  ~field_b: 'b list;
}

type 'a parametrized_tuple = ('a * 'a * int)

type root <doc text="Definition-level doc."> = {
  id <json name="ID">: string;
  await: bool;
  __init__: float;
  items: int list list;
  ?maybe: int option;
  ~extras: int list;
  ~answer <python default="42">: int;
  aliased: alias;
  point: (float * float);
  kinds: kind list;
  assoc1: (float * int) list;
  assoc2: (string * int) list <json repr="object">;
  assoc3: (float * int) list <python repr="dict">;
  assoc4: (string * int) list <json repr="object"> <python repr="dict">;
  nullables: int nullable list;
  options: int option list;
  untyped_things: abstract list;
  parametrized_record: (int, float) parametrized_record;
  parametrized_tuple: kind parametrized_tuple;
  num <doc text="
    First paragraph explaining {{num}}. This paragraph
    should be
       nicely
    rewrapped into multiple lines of even length.
    A super long URL such as https://example.com/xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx should end up on its
    own line.

    Second paragraph.
{{{
  Preformatted block.
    Second line with extra indentation.
}}}
    End.
">: int;
  num2 <doc text="Another field.">: int;
}
  <doc text="Record-level doc. This is a comment on the {{root}} type.

     This is a second paragraph and here's a preformatted block:
{{{
first line of the preformatted block
  second line with extra indentation
}}}
     Escape these: \"\"\" and '''
">

type alias = int list

type pair = (string * int)

type require_field <python decorator="deco.deco1"
                           decorator="deco.deco2(42)"
                           decorator="dataclass(order=True)"> = {
  req: string;
}

type recursive_class = {
  id: int;
  flag: bool;
  children: recursive_class list;
}

type default_list = {
  ~items: int list;
}
